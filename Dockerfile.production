FROM golang:latest

ARG DB_USERNAME
ARG DB_PASSWORD

ENV SERVICE_ENV production

RUN mkdir -p -m 775 /workspace/golang_backend
RUN go get -u bitbucket.org/liamstask/goose/cmd/goose

WORKDIR /workspace/golang_backend

ADD ./ /workspace/golang_backend

RUN ["go", "build", "main.go"]
CMD ["./main"]
